# Sparrow SPOT Scaleâ„¢ v8.4.0 Release Notes

**Release Date:** January 2025  
**Focus:** Discrepancy Resolution & Detection Consistency

## Overview

Version 8.4.0 addresses the 8 critical issues identified in the Bill-C15-12 Discrepancy Report. This release introduces the **INCONCLUSIVE** detection tier, establishes dependency rules between metrics, and improves transparency in certificate outputs.

---

## Summary of Changes

### ðŸš¨ CRITICAL Priority (Items 1-3)

#### 1. INCONCLUSIVE Detection Tier
**File:** `ai_detection_engine.py`

When detection methods disagree by more than 50 percentage points:
- Sets `detection_inconclusive = True`
- Reduces confidence by 50%
- Adds warning to domain_warnings
- Suppresses AI model attribution

**Example:** If methods return 5%, 90%, 18%, the spread is 85% â†’ INCONCLUSIVE

#### 2. Trust/NIST Dependency Rules  
**File:** `nist_compliance_checker.py`

- GOVERN pillar capped at **75** if trust_score < 70
- Prevents contradiction where Trust=53 but NIST=96%

#### 3. Fairness Penalty on NIST MEASURE
**File:** `nist_compliance_checker.py`

- MEASURE pillar capped at **60** if fairness_score < 40
- Prevents "100% MEASURE" when fairness is FAILING

---

### âš¡ HIGH Priority (Items 4-6)

#### 4. Legislation Baseline Adjustment
**File:** `document_type_baselines.py`

- Changed from -30% to **-50%** for legislative documents
- Better accounts for standardized legislative drafting patterns

#### 5. Classification Paradox Fix
**File:** `sparrow_grader_v8.py`

- Added override logic when PC â‰¥ 90 and composite â‰¥ 70
- Prevents "Questionable Policy" classification for high-impact documents
- New classification: "Transformative Policy (with limitations)"

#### 6. Certificate Critical Findings Section
**File:** `certificate_generator.py`

- Added **Critical Findings** section at TOP of certificate
- Displays before general scores for immediate visibility
- INCONCLUSIVE detection handling with proper messaging
- Suppresses AI attribution when detection spread > 50%

---

### ðŸ“Š MEDIUM Priority (Items 7-10)

#### 7. Legislative Lineage Exclusions
**File:** `data_lineage_source_mapper.py`

Added detection of legislative operative language patterns:
- "is hereby amended", "is replaced by", "is enacted"
- Appropriation language ("sum of $X is appropriated")
- Section/subsection references
- French bilingual equivalents

Legislative provisions are now distinguished from empirical claims:
- Provisions ARE the law, not claims requiring source verification
- Fixes "0/12 claims traced" issue for budget implementation acts

#### 8. Harmonize AI Percentages
**File:** `ai_usage_explainer.py`

- Updated version to 8.4.0
- Added INCONCLUSIVE detection handling throughout
- Suppresses model attribution when detection_inconclusive=True
- Executive summary now shows "N/A" for model when inconclusive

#### 9. Suppress Attribution When Inconclusive
**File:** `ai_usage_explainer.py` (completed with Item 8)

- Model attribution section replaced with uncertainty message
- Explains why attribution cannot be provided
- Recommends manual expert review

#### 10. Confidence Intervals
**Files:** Multiple (already implemented in v8.3.5)

- Confidence intervals displayed in certificate when available
- Uncertainty messaging when detection spread is high

---

### ðŸ“ LOW Priority (Items 11-12)

#### 11. Provenance Stage Status
**File:** `data_lineage_visualizer.py`

- Added `skipped` and `not_applicable` status types
- Updated HTML styles for new statuses
- Version updated to 8.4.0

#### 12. Standardize Narrative Voice
**File:** `ollama_summary_generator.py`

- Added NARRATIVE_VOICE_GUIDELINES constant
- INCONCLUSIVE-aware prompts
- Consistent hedging language for AI detection claims
- Clear instructions to avoid certainty claims

---

## Files Modified

| File | Version | Changes |
|------|---------|---------|
| `ai_detection_engine.py` | 8.4.0 | INCONCLUSIVE detection, confidence reduction |
| `nist_compliance_checker.py` | 8.4.0 | GOVERN/MEASURE dependency caps |
| `document_type_baselines.py` | 8.4.0 | -50% legislation adjustment |
| `sparrow_grader_v8.py` | 8.4.0 | Classification paradox fix |
| `certificate_generator.py` | 8.4.0 | Critical Findings section |
| `data_lineage_source_mapper.py` | 8.4.0 | Legislative exclusions |
| `ai_usage_explainer.py` | 8.4.0 | INCONCLUSIVE handling |
| `data_lineage_visualizer.py` | 8.4.0 | Status types, version |
| `ollama_summary_generator.py` | 8.4.0 | Narrative voice guidelines |

---

## Testing Recommendations

### Regression Tests
1. Run existing test suite to verify no breakage
2. Test Bill C-15 document to confirm discrepancies are resolved

### New Feature Tests
1. Create document with intentionally high detection spread (>50%)
2. Verify INCONCLUSIVE messaging appears correctly
3. Verify model attribution is suppressed
4. Test trust < 70 â†’ GOVERN cap at 75
5. Test fairness < 40 â†’ MEASURE cap at 60
6. Test PC â‰¥ 90 classification override

### Certificate Verification
1. Generate certificate for document with critical failures
2. Verify Critical Findings section appears first
3. Verify FAILING fairness is highlighted in red
4. Verify INCONCLUSIVE detection shows appropriate message

---

## Breaking Changes

None. All changes are backward-compatible.

---

## Known Limitations

1. Legislative pattern detection may have false positives in non-legislative documents that quote legislative text
2. INCONCLUSIVE threshold (50%) is fixed - may need tuning for specific domains
3. French legislative patterns are basic and may miss some edge cases

---

## Future Improvements (v8.5.0 Candidates)

1. Configurable INCONCLUSIVE threshold per document type
2. More sophisticated legislative pattern detection
3. Integration with official government document databases
4. Automated regression testing for discrepancy scenarios
