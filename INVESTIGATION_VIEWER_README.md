# Investigation Results Viewer

## Overview

Starting with **Sparrow SPOT Scale v8.6.1**, every analysis run automatically generates an interactive `index.html` file in the investigation output directory. This enables easy browsing of all analysis results without needing to manage separate files.

## Quick Start

### Option 1: View via Investigation Results Server (Recommended)

1. **Generate an analysis** (produces output in `test_articles/Bill-C15/Investigation/`)

2. **Start the results server** from the parent directory:
   ```bash
   cd /home/gene/Sparrow-SPOT-Policy/test_articles
   python3 ../investigation_results_server.py 8765 .
   ```

3. **Open your browser** to:
   ```
   http://localhost:8765/Bill-C15/Investigation/index.html
   ```

### Option 2: Direct File Access

1. Navigate to the investigation directory
2. Open `index.html` directly in your browser
3. âœ… Works offline, no server needed

### Option 3: Python's Built-in Server

```bash
cd /home/gene/Sparrow-SPOT-Policy/test_articles
python3 -m http.server 8765
```

Then visit: `http://localhost:8765/Bill-C15/Investigation/index.html`

## Features

âœ… **Browse all analysis outputs** organized by category:
- Core Analysis (JSON, TXT summaries)
- Certificates (HTML certificates)
- Reports (Deep analysis, Q&A)
- Threats & DPA (Discretionary power analysis)
- Transparency (AI disclosures, provenance)
- Narratives (Multi-format narratives)
- Q&A (Document question-answering)
- Logs (Pipeline logs and diagnostics)

âœ… **Interactive sidebar**:
- Search/filter files by name
- Expandable category sections
- Scrollable file lists

âœ… **Content viewers**:
- JSON syntax-highlighted
- HTML rendered in iframe
- Markdown formatted
- Text/logs in monospace
- All fully scrollable

âœ… **File actions**:
- Download any file
- Copy content to clipboard
- Open in new browser tab

âœ… **Metadata display**:
- File size
- File path
- Generation timestamp
- Category stats

## Integration with Sparrow SPOT Scale

The index generation is **automatic** - no additional configuration needed:

1. Run your analysis normally:
   ```bash
   python3 gui/sparrow_gui.py
   ```

2. Perform analysis with desired settings

3. **Upon completion**, you'll see:
   ```
   âœ… Investigation index generated: /path/to/Investigation/index.html
   ğŸ’¡ Tip: Run 'cd /path && python3 -m http.server 8765' to view
   Then open: http://localhost:8765/Investigation/index.html
   ```

## File Structure

```
test_articles/
â””â”€â”€ Bill-C15/
    â””â”€â”€ Investigation/
        â”œâ”€â”€ index.html              â† Auto-generated viewer
        â”œâ”€â”€ core/
        â”œâ”€â”€ certificates/
        â”œâ”€â”€ reports/
        â”œâ”€â”€ threats/
        â”œâ”€â”€ transparency/
        â”œâ”€â”€ narrative/
        â”œâ”€â”€ qa/
        â””â”€â”€ logs/
```

## Blue Theme

The index.html uses a professional blue color scheme (#0066cc primary color) matching the Sparrow SPOT Scale branding.

## Troubleshooting

**"Error loading file: NetworkError"**
- Solution: Use a web server (Option 1 or 3 above)
- Local file:// protocol may have CORS restrictions

**Missing files in index**
- The index discovers files automatically
- Ensure analysis completed successfully
- Check that output directories exist

**Port already in use**
- Use a different port: `python3 investigation_results_server.py 8888`

## Technical Details

- **Generated by**: `investigation_index_generator.py`
- **Served by**: `investigation_results_server.py` (optional)
- **Integrated in**: `sparrow_grader_v8.py` (post-analysis workflow)
- **Technology**: Pure HTML5 + JavaScript (no dependencies)
- **Compatibility**: All modern browsers

## Future Enhancements

- Real-time comparison between multiple runs
- Export analysis data (CSV, JSON bundle)
- Annotation/highlighting features
- Search across all file contents
- Timeline visualization
